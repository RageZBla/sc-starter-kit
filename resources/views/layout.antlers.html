<!doctype html>
<html lang="{{ site_short_locale }}">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/1.1.4/tailwind.min.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css">
        <style>
            .lds-dual-ring {
                width: 2rem;
                height: 2rem;
            }
            .lds-dual-ring:after {
                content: " ";
                display: block;
                width: 2rem;
                height: 2rem;
                border-radius: 50%;
                border: 3px solid #fff;
                border-color: #fff transparent #fff transparent;
                animation: lds-dual-ring 1.2s linear infinite;
            }
            @keyframes lds-dual-ring {
                0% {
                    transform: rotate(0deg);
                }
                100% {
                    transform: rotate(360deg);
                }
            }

        </style>
        <title>{{ title or site:name }}</title>
        <script src="https://cdn.jsdelivr.net/gh/alpinejs/alpine@v2.x.x/dist/alpine.js" defer></script>
    </head>
    <body>
        <div id="app">
            {{ if (errors | count) >= 1 }}
                <div class="w-full bg-red-600 text-center font-semibold py-2 text-white">
                    Something doesn't look quite right.
                </div>
            {{ /if }}

            {{ if !view:just_head }}
                <header>
                    <div class="bg-gray-200 w-full p-2 text-center font-bold text-gray-600 text-sm uppercase">Free shipping for everything over Â£15</div>

                    <nav class="w-full bg-white p-6">
                        <div class="container mx-auto flex flex-row items-center justify-between">
                            <div class="flex flex-row items-center">
                                <a class="font-bold text-gray-800 text-lg hover:text-blue-500 mr-4 {{ if current_uri === '/products' }} text-blue-500 {{ /if }}" href="/">Home</a>

                                {{ nav as='pages' }}
                                    {{ pages }}
                                        <a class="font-bold text-gray-800 text-lg hover:text-blue-500 mx-4 {{ if current_uri === url }} text-blue-500 {{ /if }}" href="{{ url }}">{{ title }}</a>
                                    {{ /pages }}
                                {{ /nav }}
                            </div>

                            <nav class="flex flex-row items-center">
                                {{ if logged_in }}
                                    <a class="font-bold text-gray-800 hover:text-blue-500 mx-4" href="/account">My Account</a>
                                {{ else }}
                                    <a class="font-bold text-gray-800 hover:text-blue-500 mx-4" href="/login">Login</a>
                                    <a class="font-bold text-gray-800 hover:text-blue-500 mx-4" href="/register">Register</a>
                                {{ /if }}

                                <a class="flex flex-row items-center font-bold text-gray-800 hover:text-blue-500 mx-4" href="/cart">
                                    <i class="fas fa-shopping-cart text-lg mr-2"></i>
                                    {{ sc:cart:count }} Items
                                </a>
                            </nav>
                        </div>
                    </nav>
                </header>

                <section class="w-full h-64 bg-gray-200"></section>

                <main class="my-6">
                    <div class="container mx-auto">
                        {{ template_content }}
                    </div>
                </main>

                <footer>
                    <div class="container mx-auto flex flex-row items-center justify-between w-full border-t border-gray-200 py-6">
                        <div class="text-gray-800 font-semibold text-sm">
                            <strong class="font-bold text-xl">{{ site:name }}</strong><br>
                            &copy; {{ now format='Y' }} Copyright
                        </div>

                        <div class="flex flex-row items-center">
                            {{ nav as='pages' }}
                                {{ pages }}
                                    <a class="text-gray-700 font-semibold mx-4" href="{{ url }}">{{ title }}</a>
                                {{ /pages }}
                            {{ /nav }}
                        </div>
                    </div>
                </footer>
            {{ else }}
                {{ template_content }}
            {{ /if }}
        </div>

        {{ yield:scripts }}
    </body>
</html>
