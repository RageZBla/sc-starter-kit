---
just_head: true
---

{{ if {sc:cart:has} === false }}
    {{ redirect to='/' }}
{{ /if }}

<div class="flex flex-col-reverse md:flex-row items-stretch md:h-full md:overflow-hidden">
    <main class="bg-white w-full md:w-2/3 md:h-screen md:overflow-scroll">
        <div class="w-full md:w-2/3 lg:w-1/2 mx-auto px-4 md:px-0 my-6">
            <header class="hidden md:flex justify-center py-4 border-b">
                <a class="text-gray-800 text-center font-medium text-2xl" href="/">{{ site:name }}</a>
            </header>

            <div class="flex flex-col mb-2 py-2 my-6">
                <h3 class="font-bold text-2xl mb-4 text-gray-800">Your Cart</h3>

                {{ if {sc:cart:count} === 0 }}
                    <p>There's nothing in your cart. <a class="text-blue-600 font-medium" href="/">Browse products</a></p>
                {{ else }}
                    <table class="table-auto mx-auto w-full">
                        <thead class="bg-gray-100">
                            <tr>
                                <th class="px-4 py-2">Product</th>
                                <th class="px-4 py-2">Quantity</th>
                                <th class="px-4 py-2">Price</th>
                            </tr>
                        </thead>
                        <tbody>
                            {{ sc:cart:items }}
                                <tr>
                                    <td class="border px-4 py-2">
                                        <a href="{{ product:url }}">{{ product:title }}</a>
                                        {{ sc:cart:removeItem :item='id' class='mt-2' }}            
                                            <button class="text-red-700 font-medium text-sm focus:outline-none" type="submit">Remove</button>
                                        {{ /sc:cart:removeItem }}
                                    </td>
                                    <td class="border px-4 py-2">
                                        <div class="flex justify-center items-center">
                                            {{ sc:cart:updateItem :item='id' class='flex justify-center items-center' }}            
                                                <select name="quantity" onchange="parentElement.submit()">
                                                    {{ loop from='1' to='5' }}
                                                        <option value="{{ value }}" {{ if quantity == value }} selected {{ /if }}>{{ value }}x</option>
                                                    {{ /loop }}
                                                </select>
                                            {{ /sc:cart:updateItem }}
                                        </div>
                                    </td>
                                    <td class="border px-4 py-2">{{ total }}</td>
                                </tr>
                            {{ /sc:cart:items }}
                            <tr>
                                <td class="px-4 py-2"></td>
                                <td class="py-2">
                                    {{ sc:cart:empty }}
                                        <button class="text-gray-700 font-medium text-center focus:outline-none" type="submit">Clear Cart</button>
                                    {{ /sc:cart:empty }}
                                </td>
                                <td class="py-2"></td>
                            </tr>
                        </tbody>
                    </table>

                    {{ sc:cart:update redirect='/checkout' id='cartAddress' }}
                        <div>
                            <div class="flex flex-col mb-2 py-2">
                                <h3 class="font-bold text-lg mb-2 text-gray-800">Shipping Address</h3>
                                <p class="mb-1">
                                    {{ shipping_name }}, <br>
                                    {{ shipping_address }}, <br>
                                    {{ shipping_city }}, <br>
                                    {{ shipping_country }}, <br>
                                    {{ shipping_zip_code }} <br>
                                </p>
                                <a class="font-medium text-blue-600" href="/cart">Edit Address</a>
                            </div>

                            <div class="flex flex-col mb-2 py-2 mb-4">
                                <h3 class="font-bold text-lg mb-2 text-gray-800">Shipping Method</h3>

                                <select name="shipping_method" value="{{ old:shipping_method }}">
                                    <option value="" disabled selected>Select a Shipping Method</option>
                                    {{ sc:shipping:methods }}
                                        <option value="{{ handle }}">{{ name }} - {{ cost }}</option>
                                    {{ /sc:shipping:methods }}
                                </select>
                            </div>

                            <div x-data="{ loading: false }" class="flex justify-center md:w-1/2 mx-auto">
                                <button
                                    x-show="loading === true"
                                    class="bg-blue-600 hover:bg-blue-500 py-2 px-6 uppercase text-white font-bold flex flex-row items-center justify-center"
                                    type="button">
                                    <div class="lds-dual-ring mr-6"></div>
                                    Working...
                                </button>
        
                                <button
                                    x-show="loading === false"
                                    class="bg-blue-600 hover:bg-blue-500 py-2 px-6 uppercase text-white font-bold"
                                    type="button"
                                    @click.prevent="loading = true; document.getElementById('cartAddress').submit()">
                                    Go to Checkout
                                </button>
                            </div>
                        </div>
                    {{ /sc:cart:update }}
                {{ /if }}
            </div>
        </div>
    </main>
    <aside class="bg-gray-200 md:h-screen w-full md:w-1/3 md:sticky">
        <div class="py-12 px-10">
            <!-- -->
        </div>
    </aside>
</div>

<!--
    Order ID: {{ sc:cart }}{{ id }}{{ /sc:cart }}
-->